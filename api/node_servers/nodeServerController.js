
let dummyArr = [
  { "Ch": 0, "Val": 0, "Evt": 0, "SID": 1, "Addr": 1, "MAddr": 1001, "WEvt": 0 },
  { "Ch": 1, "Val": 0, "Evt": 0, "SID": 1, "Addr": 2, "MAddr": 1002, "WEvt": 0 },
  { "Ch": 2, "Val": 0, "Evt": 0, "SID": 1, "Addr": 56, "MAddr": 1003, "WEvt": 0 },
  { "Ch": 3, "Val": 0, "Evt": 0, "SID": 1, "Addr": 57, "MAddr": 1004, "WEvt": 0 },
  { "Ch": 4, "Val": 0, "Evt": 16, "SID": 0, "Addr": 0, "MAddr": 1005, "WEvt": 0 },
  { "Ch": 5, "Val": 0, "Evt": 16, "SID": 0, "Addr": 0, "MAddr": 1006, "WEvt": 0 },
  { "Ch": 6, "Val": 0, "Evt": 16, "SID": 0, "Addr": 0, "MAddr": 1007, "WEvt": 0 },
  { "Ch": 7, "Val": 0, "Evt": 16, "SID": 0, "Addr": 0, "MAddr": 1008, "WEvt": 0 },
  { "Ch": 8, "Val": 0, "Evt": 16, "SID": 0, "Addr": 0, "MAddr": 1009, "WEvt": 0 },
  { "Ch": 9, "Val": 0, "Evt": 16, "SID": 0, "Addr": 0, "MAddr": 1010, "WEvt": 0 },
  { "Ch": 10, "Val": 0, "Evt": 16, "SID": 0, "Addr": 0, "MAddr": 1011, "WEvt": 0 },
  { "Ch": 11, "Val": 0, "Evt": 16, "SID": 0, "Addr": 0, "MAddr": 1012, "WEvt": 0 },
  { "Ch": 12, "Val": 0, "Evt": 16, "SID": 0, "Addr": 0, "MAddr": 1013, "WEvt": 0 },
  { "Ch": 13, "Val": 0, "Evt": 16, "SID": 0, "Addr": 0, "MAddr": 1014, "WEvt": 0 },
  { "Ch": 14, "Val": 0, "Evt": 16, "SID": 0, "Addr": 0, "MAddr": 1015, "WEvt": 0 },
  { "Ch": 15, "Val": 0, "Evt": 16, "SID": 0, "Addr": 0, "MAddr": 1016, "WEvt": 0 },
  { "Ch": 16, "Val": 0, "Evt": 16, "SID": 0, "Addr": 0, "MAddr": 1017, "WEvt": 0 },
  { "Ch": 17, "Val": 0, "Evt": 16, "SID": 0, "Addr": 0, "MAddr": 1018, "WEvt": 0 },
  { "Ch": 18, "Val": 0, "Evt": 16, "SID": 0, "Addr": 0, "MAddr": 1019, "WEvt": 0 },
  { "Ch": 19, "Val": 0, "Evt": 16, "SID": 0, "Addr": 0, "MAddr": 1020, "WEvt": 0 },
  { "Ch": 20, "Val": 0, "Evt": 16, "SID": 0, "Addr": 0, "MAddr": 1021, "WEvt": 0 },
  { "Ch": 21, "Val": 0, "Evt": 16, "SID": 0, "Addr": 0, "MAddr": 1022, "WEvt": 0 },
  { "Ch": 22, "Val": 0, "Evt": 16, "SID": 0, "Addr": 0, "MAddr": 1023, "WEvt": 0 },
  { "Ch": 23, "Val": 0, "Evt": 16, "SID": 0, "Addr": 0, "MAddr": 1024, "WEvt": 0 },
  { "Ch": 24, "Val": 0, "Evt": 16, "SID": 0, "Addr": 0, "MAddr": 1025, "WEvt": 0 },
  { "Ch": 25, "Val": 0, "Evt": 16, "SID": 0, "Addr": 0, "MAddr": 1026, "WEvt": 0 },
  { "Ch": 26, "Val": 0, "Evt": 16, "SID": 0, "Addr": 0, "MAddr": 1027, "WEvt": 0 },
  { "Ch": 27, "Val": 0, "Evt": 16, "SID": 0, "Addr": 0, "MAddr": 1028, "WEvt": 0 },
  { "Ch": 28, "Val": 0, "Evt": 16, "SID": 0, "Addr": 0, "MAddr": 1029, "WEvt": 0 },
  { "Ch": 29, "Val": 0, "Evt": 16, "SID": 0, "Addr": 0, "MAddr": 1030, "WEvt": 0 },
  { "Ch": 30, "Val": 0, "Evt": 16, "SID": 0, "Addr": 0, "MAddr": 1031, "WEvt": 0 },
  { "Ch": 31, "Val": 0, "Evt": 16, "SID": 0, "Addr": 0, "MAddr": 1032, "WEvt": 0 }
]

let relayArr = [
  { "Ch": 0, "Md": 0, "Val": 1, "Stat": 1, "Cnting": 1, "OvLch": 0 },
  { "Ch": 1, "Md": 0, "Val": 0, "Stat": 0, "Cnting": 1, "OvLch": 0 },
  { "Ch": 2, "Md": 0, "Val": 0, "Stat": 0, "Cnting": 1, "OvLch": 0 },
  { "Ch": 3, "Md": 0, "Val": 0, "Stat": 0, "Cnting": 1, "OvLch": 0 },
  { "Ch": 4, "Md": 0, "Val": 0, "Stat": 0, "Cnting": 1, "OvLch": 0 },
  { "Ch": 5, "Md": 0, "Val": 0, "Stat": 0, "Cnting": 1, "OvLch": 0 },
  { "Ch": 6, "Md": 0, "Val": 0, "Stat": 0, "Cnting": 1, "OvLch": 0 },
  { "Ch": 7, "Md": 0, "Val": 0, "Stat": 0, "Cnting": 1, "OvLch": 0 }
]

let nodeServerController = {};

nodeServerController.rpm = async (req, res) => {
  try {

    let testarr = dummyArr.map(data => {
      if (data.Ch == 28) {
        data.Val = randomIntInc(1800, 2400);
        data.SID = 2
      }
      return data;
    })

    res.status(200).send({
      code: 200,
      msg: "success",
      data: testarr
    })

  } catch (error) {
    console.log(error);

  }
}

nodeServerController.waterFlow = async (req, res) => {
  try {

    let testarr = dummyArr.map(data => {
      if (data.Ch == 29) {
        data.Val = randomIntInc(10, 80);
        data.SID = 4
      }
      if (data.Ch == 30) {
        data.Val = randomIntInc(1000, 1500);
        data.SID = 4
      }
      return data;
    })

    res.status(200).send({
      code: 200,
      msg: "success",
      data: testarr
    })

  } catch (error) {
    console.log(error);

  }
}

nodeServerController.waterTank = async (req, res) => {
  try {

    let testarr = dummyArr.map(data => {
      if (data.Ch == 31) {
        data.Val = randomIntInc(3, 10);
        data.SID = 5
      }
      return data;
    })

    res.status(200).send({
      code: 200,
      msg: "success",
      data: testarr
    })

  } catch (error) {
    console.log(error);

  }
}

nodeServerController.relay = async (req, res) => {
  try {

    relayArr.map(data => {
      if (data.Ch == 0 || data.Ch == 1 || data.Ch == 2) {
        data.Val = randomIntInc(0, 1)
      }
      return data;
    })

    res.status(200).send({
      code: 200,
      msg: "success",
      data: "testarr"
    })

  } catch (error) {
    console.log(error);

  }
}







function randomIntInc(low, high) {
  return Math.floor(Math.random() * (high - low + 1) + low)
}

export default nodeServerController;